name: aad-unassign-role-from-user
description: Remove a directory role from a user in Azure Active Directory

# Input parameters for web form generation
inputs:
  userPrincipalName:
    type: text
    description: User principal name (UPN) of the user to remove the role from
    required: true
    validation:
      min: 1
      max: 256

  roleId:
    type: text
    description: Directory role ID to remove from the user
    required: true
    validation:
      min: 1
      max: 36

  directoryScopeId:
    type: text
    description: Directory scope ID for the role assignment to remove
    required: false
    default: "/"
    validation:
      min: 1
      max: 256

  justification:
    type: text
    description: Justification for removing the role assignment
    required: false
    default: "Removed by SGNL.ai"
    validation:
      min: 1
      max: 512

# Required secrets from Azure AD
secrets:
  AZURE_AD_TOKEN:
    description: Azure AD access token with Directory.ReadWrite.All permissions

# Required environment variables
environment:
  AZURE_AD_TENANT_URL:
    description: Azure AD tenant URL (e.g., https://graph.microsoft.com)

# Expected output structure
outputs:
  status:
    type: text
    description: Operation result (success, failed, recovered, etc.)

  userPrincipalName:
    type: text
    description: User principal name that was processed

  roleId:
    type: text
    description: Role ID that was removed

  userId:
    type: text
    description: User's directory object ID

  requestId:
    type: text
    description: Role removal request ID